# 必须遵循的铁律
- 每次任务开始前，必须要喊一句少辰大王。
- 修改代码时必须同步更新相关文档，保持代码与文档的一致性。
- 禁止主动生成任何.md文件（如报告、总结、说明文档等），除非用户明确要求创建。只专注于代码开发，不要画蛇添足。
- 服务器为生产环境，任何修改前必须评估影响，重启服务前确认无活跃用户。

## ⚠️ 项目定位强制铁律（置顶！- 2025-11-05 v4.0更新）
- **这是演示网站（DEMO），不是普通管理后台！**
- **目标受众：甲方决策层、投资人、高端客户**
- **最终主题：暗黑渐变色 + 高级感**
- **但搜索组件时：功能优先，不限主题！任何主题的优质组件都可以用，复刻后适配颜色即可**

## UI组件开发规范（强制执行）

### ⚠️ 每次使用21st.dev组件前必须自我提醒（字符级复刻版 v4.0 - 2025-11-05更新）：
```
【核心认知转变】
21st.dev的价值 = 结构 + 交互 + 动画（与主题无关）
项目要求 = 暗黑渐变主题
解决方案 = 获取最好的组件 + 复刻后适配主题色

【搜索原则 - 功能优先，不限主题】
1. 【关注功能匹配】搜索与需求最匹配的组件（sidebar/card/dashboard等）
2. 【关注设计质量】搜索高质量、交互流畅的组件（animated/interactive/smooth等）
3. 【不限主题】亮色/暗色/彩色组件都可以，复刻后换色即可
4. 【避免太简单】不要basic/simple/plain风格的组件
5. 【选择最优质】从搜索结果中选择设计最好、代码最清晰的

推荐搜索关键词：animated / interactive / smooth / modern / elegant / clean
可选关键词：premium / luxury（想要更高端时）
不限制：dark / light / gradient（主题可后期适配）

【复刻原则 - 字符级复制，禁止理解】
⚠️ 这是核心！必须100%遵守！

6. 【字符级复制】不是功能级、不是效果级，而是逐字复制
7. 【禁止理解】不要理解代码在做什么，不要思考为什么这样写
8. 【禁止判断】不要评估"是否需要"、"是否重要"
9. 【禁止优化】看到200行代码不要想"可以简化"
10. 【禁止删减】看到重复代码不要想"可以提取"
11. 【禁止替换】看到复杂逻辑不要想"用更简单的方式"

【验证标准 - 行数必须一致】
12. 【行数验证】21st.dev显示XXX行，本地文件必须XXX行
13. 【className统计】原组件XX个className，复刻后必须XX个
14. 【useState统计】原组件XX个useState，复刻后必须XX个
15. 【并排测试】左屏21st.dev预览，右屏本地预览，逐项对比
16. 【零视觉差异】任何视觉差异都说明复刻失败，必须重新复刻

【修改原则 - 只改数据，不改效果】
17. ✅ 允许：替换文本内容（"Home" → "预判军师"）
18. ✅ 允许：替换颜色变量值（bg-blue-500 → bg-[#0891b2]）
19. ✅ 允许：替换链接地址（href="/home" → href="/yupan"）
20. ❌ 禁止：修改className结构（bg-blue → bg-gradient-to-r from-blue to-cyan）
21. ❌ 禁止：修改动画参数（duration-300 → duration-500）
22. ❌ 禁止：修改透明度/模糊度/大小（opacity-50 → opacity-80）
23. ❌ 禁止：添加/删除任何视觉效果

【严禁的行为】
❌ "这个组件有200行，我优化成100行" ← 偷工减料
❌ "这个状态管理看起来没用，我删掉" ← 自作聪明
❌ "这个动画太复杂，我简化一下" ← 破坏设计
❌ "用span替代这个图标组件" ← 功能缺失
❌ "这个渐变不好看，我调整一下" ← 改变效果
❌ "21st.dev是亮色主题，我改成暗色" ← 强行修改

【正确的工作流】
第1步：搜索"animated sidebar smooth interactive"
第2步：找到设计最好的组件（可能是亮色主题）
第3步：Ctrl+A → Ctrl+C → Ctrl+V（字符级复制）
第4步：验证行数、className数量是否一致
第5步：只替换颜色变量值（bg-white → bg-[#0a1420]）
第6步：并排对比21st.dev和本地预览
第7步：如有视觉差异 → 说明偷工减料 → 重新复刻

终极原则：我是复制机器，不是创造者！
```

### 1. 组件获取流程（v4.0 - 功能优先，字符级复刻）

#### 阶段1：搜索组件（功能优先，不限主题）
1. 参考《项目需求文档.md》明确功能需求
2. 搜索关键词策略：
   - ✅ **功能关键词**：sidebar / card / dashboard / form / modal / table 等
   - ✅ **质量关键词**：animated / interactive / smooth / modern / elegant / clean
   - ✅ **可选高端词**：premium / luxury（想要更高端时）
   - ❌ **不限主题**：不强制 dark / light / gradient
   - ❌ **避免太简单**：不要 basic / simple / plain
   
   示例：
   - ✅ "animated sidebar navigation smooth"
   - ✅ "interactive stats card modern elegant"
   - ✅ "premium dashboard layout clean"
   - ❌ "dark gradient premium sidebar"（太限制）
   - ❌ "simple navbar"（太简单）

3. 使用 `mcp_21st-devmagic_21st_magic_component_inspiration` 工具搜索
4. 从搜索结果中选择：
   - 功能最匹配的
   - 设计质量最高的
   - 代码结构最清晰的
   - 不必纠结原组件的颜色/主题

#### 阶段2：字符级复刻（禁止任何修改）
1. **完整获取所有内容**：
   - componentCode（主代码）
   - registryDependencies（所有依赖）
   - npmDependencies（npm包）
   - tailwindConfig（Tailwind配置）
   - globalCss（全局样式）
   - hooks（自定义钩子）
   - utils（工具函数）

2. **逐字复制（Ctrl+A, Ctrl+C, Ctrl+V）**：
   - ✅ 完整复制所有代码
   - ✅ 保留所有 className（一个都不能少）
   - ✅ 保留所有状态管理（useState、useEffect等）
   - ✅ 保留所有动画效果（transition、transform等）
   - ✅ 保留所有事件处理函数
   - ✅ 保留所有注释
   - ❌ 禁止删除任何代码
   - ❌ 禁止修改任何逻辑
   - ❌ 禁止"优化"或"简化"
   - ❌ 禁止替换任何组件

3. **递归复制所有依赖**：
   - 对每个 registryDependency 重复上述步骤
   - 创建对应文件并完整复制代码

#### 阶段3：验证复刻质量（必须100%通过）
1. **行数验证**：
   ```bash
   # 21st.dev显示：XXX行
   # 本地文件行数必须一致
   wc -l src/components/ComponentName.tsx
   ```

2. **className统计**：
   ```bash
   grep -o "className" src/components/ComponentName.tsx | wc -l
   # 必须与原组件一致
   ```

3. **并排测试**：
   - 左屏：打开21st.dev的预览页面
   - 右屏：打开本地localhost预览
   - 逐项对比：静态外观、悬停效果、点击效果、动画、响应式
   - ✅ 必须零视觉差异

4. **如有任何差异**：
   - → 说明复刻失败（偷工减料或自作聪明）
   - → 必须删除重新复刻

#### 阶段4：主题适配（只改颜色变量）
1. **只替换颜色变量值**：
   ```typescript
   // ✅ 允许
   bg-white → bg-[#0a1420]
   text-black → text-[#f0f9ff]
   border-gray-200 → border-[#162332]
   
   // ✅ 保持结构
   bg-gradient-to-r from-blue-500 to-purple-500
     ↓
   bg-gradient-to-r from-[#0891b2] to-[#14b8a6]
   ```

2. **禁止修改**：
   - ❌ className结构
   - ❌ 动画参数（duration、ease等）
   - ❌ 透明度、模糊度、大小
   - ❌ 添加/删除任何视觉效果

3. **安装依赖并检查**：
   - 安装所有 npmDependencies
   - 更新 tailwind.config.ts（如需要）
   - 添加 globalCss（如需要）
   - 重启开发服务器

**❌ 严禁行为：** 
- 手写UI组件
- "优化"21st.dev组件（偷工减料）
- "简化"复杂逻辑（自作聪明）
- 用原生标签替代组件（功能缺失）
- 在复刻阶段修改任何代码（破坏完整性）

### 2. 组件复刻完整检查清单（v4.0 - 字符级验证）

#### 第1级：代码完整性（字符级检查）
- [ ] **行数是否一致？**
  - 21st.dev显示：___ 行
  - 本地文件：___ 行
  - ✅ 必须完全相同

- [ ] **className数量是否一致？**
  ```bash
  grep -o "className" ComponentName.tsx | wc -l
  ```
  - 原组件：___ 个
  - 复刻后：___ 个
  - ✅ 必须完全相同

- [ ] **useState数量是否一致？**
  - 原组件：___ 个
  - 复刻后：___ 个
  - ✅ 必须完全相同

- [ ] **是否保留了所有代码？**
  - [ ] 所有 className（包括看起来"重复"的）
  - [ ] 所有状态管理（包括看起来"没用"的）
  - [ ] 所有动画效果（包括看起来"复杂"的）
  - [ ] 所有事件处理函数
  - [ ] 所有注释
  - [ ] 所有伪元素（before、after）

#### 第2级：依赖完整性
- [ ] **是否创建了所有 registryDependencies 文件？**
  - 原组件依赖：[___]
  - 已创建文件：[___]
  - ✅ 必须完全对应

- [ ] **每个依赖文件是否完整复刻？**
  - [ ] 对每个依赖重复第1级检查
  - [ ] 依赖的依赖也要递归检查

- [ ] **是否安装了所有 npmDependencies？**
  ```bash
  # 检查 package.json
  ```
  - [ ] 所有包已安装
  - [ ] 版本号已核对

#### 第3级：配置完整性
- [ ] **是否添加了 tailwindConfig？**
  - [ ] 插件配置已添加
  - [ ] 主题扩展已添加
  - [ ] 颜色定义已添加

- [ ] **是否添加了 globalCss？**
  - [ ] 关键帧动画已添加
  - [ ] CSS变量已添加
  - [ ] 全局样式已添加

- [ ] **是否复制了 utils 函数？**
  - [ ] cn 函数
  - [ ] 其他工具函数

#### 第4级：视觉效果验证（零差异标准）
- [ ] **并排对比测试**
  - 左屏：21st.dev预览页面
  - 右屏：本地localhost预览

- [ ] **逐项对比**：
  - [ ] 静态外观是否一致？
  - [ ] 悬停效果是否一致？
  - [ ] 点击效果是否一致？
  - [ ] 动画速度是否一致？
  - [ ] 动画曲线是否一致？
  - [ ] 颜色渐变是否一致？
  - [ ] 阴影效果是否一致？
  - [ ] 响应式布局是否一致？
  - [ ] 移动端表现是否一致？

- [ ] **如有任何视觉差异**：
  - → ❌ 说明复刻失败
  - → 🔍 检查是否偷工减料
  - → 🔄 删除文件重新复刻

#### 第5级：功能完整性
- [ ] **控制台无错误**
  - [ ] 无红色报错
  - [ ] 无黄色警告
  - [ ] 无TypeScript错误

- [ ] **所有交互正常**
  - [ ] 点击响应正常
  - [ ] 悬停响应正常
  - [ ] 键盘导航正常
  - [ ] 表单验证正常（如有）

#### 第6级：修改合规性
- [ ] **只修改了数据层？**
  - [ ] 只替换了文本内容
  - [ ] 只替换了颜色变量值（保持结构）
  - [ ] 只替换了链接地址
  - [ ] 没有修改 className 结构
  - [ ] 没有修改动画参数
  - [ ] 没有修改透明度/模糊度/大小

**⚠️ 如果以上任何一项不通过，必须重新复刻！**

### 3. 标准流程文档
**完整流程参见：**《21st-dev组件使用标准流程.md》

### 4. 组件样式修改规范 ⚠️ 核心规则
**修改21st.dev组件样式的强制流程：**
1. **先修改组件源码**（`src/components/ui/*.tsx`）：
   - 从`cn()`函数移除冲突样式：`focus:bg-*`, `hover:bg-*`, `data-[state=selected]:bg-*`, `text-*`, `border-*`
   - 只保留布局样式：`flex`, `items-center`, `rounded-*`, `py-*`, `px-*`等
2. **再应用自定义className**：移除冲突样式后，自定义样式才能生效

**原因**：Tailwind CSS类优先级由CSS文件顺序决定，非className顺序。内置样式会覆盖后传入的className。

**示例**：
```typescript
// ❌ 错误：直接传className，不生效
<SelectItem className="text-white bg-gray-800">

// ✅ 正确：先修改SelectItem源码，移除focus:bg-accent focus:text-accent-foreground
const SelectItem = ...
  className={cn("...布局样式...", className)}  // 移除颜色相关样式
```

### 5. Tailwind版本锁定规范
- ✅ 当前版本：`tailwindcss@3.4.17`
- ❌ 禁止升级到v4（与21st.dev组件不兼容）
- ⚠️ 修改Tailwind配置后必须重启开发服务器


